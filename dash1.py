import dash 
import dash_core_components as dcc
import dash_html_components as html
import pandas as pd
import numpy as np
import os
import csv 
from pgmpy.models import BayesianModel
from pgmpy.sampling import BayesianModelSampling
from pgmpy.models import BayesianNetwork
from pgmpy.factors.discrete import TabularCPD
from pgmpy.estimators import MaximumLikelihoodEstimator, BayesianEstimator
from pgmpy.inference import VariableElimination

df=pd.DataFrame({'age': ['55-100', '55-100', '55-100', '0-45', '0-45', '55-100', '55-100', '55-100', '55-100', '45-55', '55-100', '55-100', '55-100', '0-45', '45-55', '55-100', '45-55', '45-55', '45-55', '45-55', '55-100', '55-100', '55-100', '55-100', '55-100', '45-55', '55-100', '55-100', '0-45', '0-45', '55-100', '55-100', '55-100', '55-100', '0-45', '0-45', '0-45', '55-100', '45-55', '55-100', '55-100', '0-45', '55-100', '55-100', '55-100', '55-100', '45-55', '45-55', '55-100', '45-55', '0-45', '55-100', '0-45', '0-45', '55-100', '45-55', '45-55', '0-45', '45-55', '45-55', '45-55', '45-55', '55-100', '45-55', '45-55', '55-100', '55-100', '45-55', '55-100', '45-55', '55-100', '55-100', '55-100', '55-100', '0-45', '55-100', '55-100', '45-55', '45-55', '55-100', '0-45', '45-55', '0-45', '55-100', '45-55', '0-45', '45-55', '45-55', '45-55', '45-55', '55-100', '55-100', '55-100', '0-45', '55-100', '45-55', '55-100', '55-100', '45-55', '45-55', '0-45', '0-45', '55-100', '55-100', '45-55', '45-55', '55-100', '55-100', '55-100', '0-45', '55-100', '55-100', '45-55', '0-45', '55-100', '0-45', '55-100', '0-45', '55-100', '55-100', '45-55', '55-100', '45-55', '45-55', '55-100', '0-45', '55-100', '45-55', '0-45', '55-100', '45-55', '45-55', '0-45', '45-55', '0-45', '45-55', '55-100', '55-100', '0-45', '45-55', '55-100', '55-100', '45-55', '55-100', '55-100', '45-55', '55-100', '0-45', '0-45', '55-100', '45-55', '0-45', '55-100', '45-55', '55-100', '55-100', '45-55', '55-100', '55-100', '55-100', '45-55', '55-100', '45-55', '55-100', '45-55', '55-100', '45-55', '45-55', '0-45', '0-45', '55-100', '45-55', '55-100', '55-100', '55-100', '55-100', '45-55', '55-100', '0-45', '45-55', '45-55', '55-100', '0-45', '55-100', '55-100', '55-100', '0-45', '55-100', '45-55', '55-100', '45-55', '45-55', '0-45', '55-100', '55-100', '55-100', '55-100', '0-45', '45-55', '55-100', '45-55', '55-100', '55-100', '55-100', '0-45', '0-45', '55-100', '45-55', '45-55', '55-100', '0-45', '0-45', '0-45', '55-100', '45-55', '55-100', '45-55', '45-55', '55-100', '55-100', '0-45', '45-55', '0-45', '45-55', '55-100', '0-45', '45-55', '55-100', '45-55', '55-100', '45-55', '45-55', '45-55', '55-100', '45-55', '45-55', '55-100', '45-55', '45-55', '0-45', '0-45', '0-45', '45-55', '55-100', '55-100', '55-100', '55-100', '45-55', '45-55', '55-100', '55-100', '55-100', '55-100', '45-55', '0-45', '0-45', '55-100', '55-100', '55-100', '55-100', '0-45', '55-100', '55-100', '0-45', '55-100', '0-45', '45-55', '55-100', '0-45', '0-45', '55-100', '55-100', '45-55', '55-100', '55-100', '55-100', '55-100', '0-45', '55-100', '55-100', '55-100', '45-55', '45-55', '0-45', '55-100', '55-100', '55-100', '55-100', '55-100', '55-100', '55-100', '45-55', '0-45', '55-100', '55-100', '0-45', '55-100', '55-100', '0-45', '55-100', '55-100', '55-100', '0-45'], 
                'sex': ['1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0'],
                'cp': ['1.0', '4.0', '4.0', '3.0', '2.0', '2.0', '4.0', '4.0', '4.0', '4.0', '4.0', '2.0', '3.0', '2.0', '3.0', '3.0', '2.0', '4.0', '3.0', '2.0', '1.0', '1.0', '2.0', '3.0', '4.0', '3.0', '3.0', '1.0', '4.0', '4.0', '1.0', '4.0', '3.0', '4.0', '3.0', '4.0', '4.0', '4.0', '4.0', '3.0', '4.0', '1.0', '2.0', '3.0', '4.0', '3.0', '3.0', '4.0', '3.0', '3.0', '2.0', '4.0', '4.0', '2.0', '4.0', '4.0', '3.0', '4.0', '3.0', '1.0', '4.0', '3.0', '4.0', '3.0', '4.0', '4.0', '3.0', '3.0', '4.0', '3.0', '3.0', '4.0', '4.0', '4.0', '4.0', '3.0', '4.0', '3.0', '2.0', '4.0', '4.0', '4.0', '3.0', '3.0', '2.0', '3.0', '3.0', '3.0', '4.0', '3.0', '4.0', '4.0', '3.0', '3.0', '3.0', '4.0', '4.0', '4.0', '2.0', '4.0', '4.0', '1.0', '4.0', '3.0', '3.0', '2.0', '4.0', '3.0', '4.0', '4.0', '4.0', '4.0', '1.0', '4.0', '3.0', '2.0', '3.0', '4.0', '4.0', '4.0', '4.0', '4.0', '3.0', '4.0', '1.0', '2.0', '4.0', '4.0', '2.0', '4.0', '3.0', '3.0', '2.0', '4.0', '3.0', '2.0', '4.0', '2.0', '4.0', '3.0', '2.0', '1.0', '2.0', '3.0', '3.0', '3.0', '4.0', '3.0', '2.0', '3.0', '1.0', '4.0', '3.0', '4.0', '4.0', '4.0', '4.0', '4.0', '4.0', '3.0', '2.0', '4.0', '3.0', '4.0', '3.0', '4.0', '3.0', '2.0', '4.0', '2.0', '3.0', '4.0', '4.0', '4.0', '4.0', '4.0', '4.0', '4.0', '3.0', '3.0', '4.0', '4.0', '1.0', '1.0', '4.0', '2.0', '3.0', '2.0', '2.0', '3.0', '3.0', '4.0', '4.0', '4.0', '3.0', '4.0', '1.0', '4.0', '2.0', '1.0', '4.0', '4.0', '3.0', '3.0', '4.0', '4.0', '4.0', '4.0', '2.0', '4.0', '3.0', '1.0', '3.0', '4.0', '4.0', '1.0', '2.0', '4.0', '4.0', '4.0', '3.0', '3.0', '3.0', '4.0', '4.0', '2.0', '4.0', '3.0', '4.0', '4.0', '3.0', '4.0', '3.0', '2.0', '3.0', '4.0', '4.0', '4.0', '2.0', '2.0', '2.0', '2.0', '4.0', '1.0', '3.0', '4.0', '4.0', '4.0', '4.0', '2.0', '4.0', '4.0', '4.0', '3.0', '4.0', '3.0', '4.0', '3.0', '2.0', '2.0', '3.0', '2.0', '1.0', '3.0', '4.0', '4.0', '4.0', '3.0', '4.0', '3.0', '4.0', '4.0', '4.0', '4.0', '1.0', '1.0', '3.0', '3.0', '2.0', '4.0', '4.0', '3.0', '4.0', '2.0', '4.0', '4.0', '4.0', '2.0', '2.0', '2.0', '3.0', '2.0', '4.0', '4.0', '4.0', '2.0', '4.0', '4.0', '1.0', '4.0', '4.0', '2.0', '3.0'], 
                'trestbps': ['140-300', '140-300', '0-120', '120-140', '120-140', '0-120', '120-140', '0-120', '120-140', '120-140', '120-140', '120-140', '120-140', '0-120', '140-300', '140-300', '0-120', '120-140', '120-140', '120-140', '0-120', '140-300', '0-120', '120-140', '120-140', '0-120', '0-120', '140-300', '140-300', '0-120', '120-140', '0-120', '120-140', '120-140', '120-140', '120-140', '0-120', '140-300', '120-140', '140-300', '140-300', '120-140', '140-300', '140-300', '120-140', '0-120', '0-120', '140-300', '120-140', '120-140', '0-120', '0-120', '0-120', '120-140', '120-140', '120-140', '120-140', '0-120', '120-140', '120-140', '120-140', '140-300', '120-140', '120-140', '0-120', '140-300', '120-140', '140-300', '140-300', '140-300', '140-300', '120-140', '0-120', '0-120', '0-120', '140-300', '120-140', '120-140', '120-140', '140-300', '0-120', '120-140', '120-140', '140-300', '0-120', '120-140', '120-140', '120-140', '120-140', '120-140', '0-120', '140-300', '120-140', '0-120', '120-140', '120-140', '0-120', '140-300', '120-140', '120-140', '0-120', '0-120', '120-140', '0-120', '0-120', '0-120', '120-140', '120-140', '0-120', '0-120', '140-300', '120-140', '0-120', '120-140', '120-140', '120-140', '120-140', '120-140', '120-140', '120-140', '120-140', '140-300', '0-120', '120-140', '120-140', '120-140', '140-300', '0-120', '0-120', '120-140', '0-120', '0-120', '120-140', '120-140', '120-140', '120-140', '140-300', '0-120', '0-120', '120-140', '120-140', '140-300', '120-140', '120-140', '0-120', '0-120', '140-300', '0-120', '120-140', '0-120', '140-300', '0-120', '0-120', '140-300', '0-120', '120-140', '120-140', '120-140', '120-140', '0-120', '0-120', '120-140', '0-120', '0-120', '120-140', '120-140', '120-140', '120-140', '120-140', '0-120', '140-300', '140-300', '140-300', '120-140', '140-300', '140-300', '0-120', '120-140', '120-140', '120-140', '120-140', '120-140', '140-300', '140-300', '140-300', '120-140', '0-120', '140-300', '140-300', '120-140', '120-140', '120-140', '120-140', '120-140', '0-120', '0-120', '140-300', '120-140', '0-120', '140-300', '0-120', '140-300', '140-300', '120-140', '0-120', '140-300', '120-140', '140-300', '120-140', '140-300', '0-120', '0-120', '120-140', '140-300', '0-120', '0-120', '0-120', '120-140', '120-140', '120-140', '0-120', '0-120', '0-120', '120-140', '0-120', '0-120', '0-120', '140-300', '0-120', '0-120', '120-140', '140-300', '0-120', '0-120', '140-300', '120-140', '120-140', '0-120', '120-140', '0-120', '0-120', '120-140', '120-140', '120-140', '0-120', '0-120', '0-120', '0-120', '120-140', '120-140', '0-120', '140-300', '120-140', '0-120', '0-120', '0-120', '0-120', '120-140', '140-300', '120-140', '0-120', '120-140', '140-300', '0-120', '120-140', '120-140', '120-140', '120-140', '140-300', '120-140', '120-140', '140-300', '120-140', '0-120', '120-140', '140-300', '140-300', '120-140', '140-300', '120-140', '0-120', '120-140', '120-140', '120-140', '140-300', '0-120', '140-300', '120-140', '120-140', '0-120', '140-300', '120-140', '0-120', '120-140', '120-140', '0-120', '140-300', '120-140', '0-120', '140-300', '120-140', '120-140', '120-140'], 
                'chol': ['0-240', '260-400', '0-240', '240-260', '0-240', '0-240', '260-400', '260-400', '240-260', '0-240', '0-240', '260-400', '240-260', '260-400', '0-240', '0-240', '0-240', '0-240', '260-400', '260-400', '0-240', '260-400', '260-400', '0-240', '0-240', '0-240', '260-400', '0-240', '240-260', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '0-240', '260-400', '260-400', '240-260', '0-240', '0-240', '260-400', '0-240', '260-400', '0-240', '0-240', '240-260', '', '0-240', '0-240', '0-240', '260-400', '0-240', '240-260', '260-400', '0-240', '0-240', '260-400', '0-240', '260-400', '0-240', '0-240', '260-400', '0-240', '260-400', '0-240', '0-240', '260-400', '0-240', '260-400', '240-260', '260-400', '240-260', '0-240', '260-400', '240-260', '260-400', '240-260', '260-400', '0-240', '260-400', '260-400', '260-400', '260-400', '0-240', '240-260', '0-240', '0-240', '240-260', '260-400', '0-240', '0-240', '0-240', '240-260', '240-260', '0-240', '240-260', '0-240', '0-240', '240-260', '0-240', '260-400', '260-400', '0-240', '260-400', '0-240', '0-240', '240-260', '0-240', '260-400', '240-260', '0-240', '260-400', '260-400', '0-240', '0-240', '0-240', '260-400', '240-260', '240-260', '', '0-240', '0-240', '260-400', '0-240', '260-400', '0-240', '0-240', '0-240', '240-260', '0-240', '0-240', '260-400', '0-240', '240-260', '0-240', '260-400', '0-240', '240-260', '0-240', '260-400', '0-240', '260-400', '0-240', '240-260', '260-400', '240-260', '260-400', '260-400', '260-400', '260-400', '', '260-400', '240-260', '260-400', '260-400', '260-400', '260-400', '260-400', '0-240', '260-400', '0-240', '240-260', '240-260', '0-240', '0-240', '260-400', '260-400', '0-240', '260-400', '0-240', '240-260', '260-400', '0-240', '260-400', '0-240', '0-240', '260-400', '240-260', '260-400', '', '240-260', '260-400', '260-400', '0-240', '0-240', '240-260', '260-400', '240-260', '0-240', '260-400', '240-260', '260-400', '0-240', '260-400', '0-240', '0-240', '240-260', '260-400', '240-260', '260-400', '0-240', '260-400', '0-240', '260-400', '240-260', '0-240', '260-400', '240-260', '0-240', '0-240', '0-240', '0-240', '0-240', '0-240', '0-240', '240-260', '260-400', '260-400', '260-400', '260-400', '0-240', '260-400', '260-400', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '260-400', '0-240', '260-400', '0-240', '260-400', '260-400', '240-260', '260-400', '260-400', '0-240', '260-400', '260-400', '0-240', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '0-240', '260-400', '260-400', '260-400', '0-240', '0-240', '0-240', '240-260', '260-400', '240-260', '260-400', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '260-400', '240-260', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '0-240', '0-240', '260-400', '0-240', '0-240', '0-240', '0-240', '0-240', '240-260', '260-400', '0-240', '0-240', '0-240', '0-240'],
                'fbs': ['1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0'],
                'thalach': ['150.0', '108.0', '129.0', '187.0', '172.0', '178.0', '160.0', '163.0', '147.0', '155.0', '148.0', '153.0', '142.0', '173.0', '162.0', '174.0', '168.0', '160.0', '139.0', '171.0', '144.0', '162.0', '160.0', '173.0', '132.0', '158.0', '172.0', '114.0', '171.0', '114.0', '151.0', '160.0', '158.0', '161.0', '179.0', '178.0', '120.0', '112.0', '132.0', '137.0', '114.0', '178.0', '162.0', '157.0', '169.0', '165.0', '123.0', '128.0', '157.0', '152.0', '168.0', '140.0', '153.0', '188.0', '144.0', '109.0', '163.0', '158.0', '152.0', '125.0', '142.0', '160.0', '131.0', '170.0', '113.0', '142.0', '155.0', '165.0', '140.0', '147.0', '148.0', '163.0', '99.0', '158.0', '177.0', '151.0', '141.0', '142.0', '180.0', '111.0', '148.0', '143.0', '182.0', '150.0', '172.0', '180.0', '156.0', '115.0', '160.0', '149.0', '151.0', '145.0', '146.0', '175.0', '172.0', '161.0', '142.0', '157.0', '158.0', '186.0', '185.0', '174.0', '159.0', '130.0', '139.0', '156.0', '162.0', '150.0', '140.0', '140.0', '146.0', '144.0', '190.0', '136.0', '97.0', '132.0', '165.0', '182.0', '132.0', '127.0', '150.0', '154.0', '143.0', '111.0', '174.0', '175.0', '133.0', '126.0', '170.0', '163.0', '147.0', '154.0', '202.0', '186.0', '165.0', '161.0', '125.0', '103.0', '130.0', '166.0', '164.0', '159.0', '184.0', '131.0', '154.0', '152.0', '124.0', '179.0', '170.0', '160.0', '178.0', '122.0', '160.0', '145.0', '96.0', '109.0', '173.0', '171.0', '170.0', '151.0', '156.0', '162.0', '158.0', '122.0', '175.0', '168.0', '169.0', '159.0', '156.0', '138.0', '112.0', '111.0', '143.0', '157.0', '132.0', '88.0', '147.0', '105.0', '162.0', '173.0', '166.0', '150.0', '178.0', '145.0', '161.0', '179.0', '194.0', '120.0', '195.0', '146.0', '163.0', '122.0', '143.0', '106.0', '115.0', '125.0', '131.0', '152.0', '162.0', '125.0', '159.0', '154.0', '173.0', '133.0', '161.0', '147.0', '130.0', '126.0', '155.0', '154.0', '170.0', '182.0', '168.0', '165.0', '160.0', '162.0', '172.0', '152.0', '122.0', '182.0', '172.0', '167.0', '179.0', '95.0', '169.0', '192.0', '143.0', '172.0', '108.0', '132.0', '169.0', '117.0', '126.0', '121.0', '163.0', '116.0', '103.0', '144.0', '162.0', '162.0', '153.0', '163.0', '163.0', '145.0', '96.0', '71.0', '156.0', '118.0', '168.0', '140.0', '126.0', '105.0', '105.0', '157.0', '181.0', '173.0', '142.0', '116.0', '143.0', '141.0', '149.0', '152.0', '171.0', '169.0', '125.0', '125.0', '156.0', '134.0', '181.0', '150.0', '138.0', '138.0', '120.0', '125.0', '162.0', '155.0', '152.0', '152.0', '164.0', '131.0', '143.0', '179.0', '130.0', '174.0', '161.0', '140.0', '146.0', '144.0', '163.0', '169.0', '150.0', '166.0', '144.0', '144.0', '136.0', '182.0', '90.0', '123.0', '132.0', '141.0', '115.0', '174.0', '173.0'], 
                'exang': ['0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0'], 
                'num': ['0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '1.0', '0.0', '1.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '0.0', '0.0', '1.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '0.0', '0.0', '1.0', '0.0', '1.0', '1.0', '1.0', '0.0', '1.0', '1.0', '1.0', '1.0', '1.0', '1.0', '0.0'],
                'anom_thalach': ['0', '0', '0', '1', '0', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '1', '1', '0', '0', '1', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '1', '1', '0', '0', '0', '1', '0', '0', '0', '1', '0', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '1', '1', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '1', '0', '0', '1', '1', '0', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0', '0', '1', '1', '1', '0', '0', '1', '0', '0', '1', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '1', '1', '1', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0', '1', '1', '0', '1', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0', '0', '0', '1', '0', '0', '1', '0', '0', '1', '0', '0', '0', '0', '1', '0', '1', '0', '0', '0', '1', '0', '0', '0', '0', '0', '1', '0']})



df['sex'] = df['sex'].astype(float)
df['cp'] = df['cp'].astype(float)
df['fbs'] = df['fbs'].astype(float)
df['thalach'] = df['thalach'].astype(float)
df['exang'] = df['exang'].astype(float)
df['num'] = df['num'].astype(float)
df['anom_thalach'] = df['anom_thalach'].astype(float)


model = BayesianModel([('age','chol'),('age','fbs'),('sex','chol'),('sex','fbs')
                      ,('chol','num'),('fbs','num')
                      , ('num','cp'), ('num','exang'), ('num','anom_thalach'), ('num','trestbps')])

model.fit(df, estimator=MaximumLikelihoodEstimator)

#for i in model.nodes():
 #   print(model.get_cpds(i))

#PRUEBA INFERENCIA


#PRUEBA INFERENCIA - Ya separdo el valor, para poder hacer un IF con la recomendacion


#COMIENZA DASH
app= dash.Dash()




options_sexo= [
    {'label': 'Hombre', 'value': 'Hombre'},
    {'label': 'Mujer', 'value': 'Mujer'},
    
]
options_col=[
    {'label':'0-240','value':'0-240'},
    {'label':'240-260','value':'240-260'},
    {'label':'260-400','value':'260-400'}
    ]


app.layout = html.Div([
    html.H1('¡Bienvenido/a a nuestra página de prevención de enfermedades cardiovasculares!'),
    html.Div([
    html.P('Nos complace que haya decidido visitar nuestro sitio web para obtener información y consejos sobre cómo prevenir enfermedades cardiovasculares y mantener su corazón sano.Sabemos que la salud del corazón es esencial para llevar una vida plena y activa, y estamos comprometidos a brindarle toda la información necesaria para ayudarlo/a a lograrlo.Par esto, necesitamos que tenga disponible la siguiente información:')
    ]),
    html.Div([
    html.P("1: Un examen que muestre su nivel actual de colesterol mg/dl")
    ]),
    html.Div([
    html.P("2: Un examen que muestre su nivel actual de glucemia en ayunas (o fasting blood sugar) mg/dl")
    ]),
    html.Div([
    html.P("3: Un examen que muestre su frecuencia cardiaca en reposo (se puede medir tomando el pulso en la muñeca o el cuello durante un período de tiempo determinado, generalmente de 30 segundos a un minuto. El resultado se multiplica luego por dos para obtener la frecuencia cardíaca en reposo) ")
    ]),

    html.Div([
      html.H5('Seleccione su sexo.')]),
    dcc.Dropdown(
        id='dropdown',
        options=options_sexo,
        value='Hombre'
        ),
    html.Div(id='output'),
    html.H5("¿Qué edad tiene?"),
    html.Div(["Edad: ",
              dcc.Input
              (id='my-input', value='0', type='text')]),
    html.Div(id='output'),
    html.Div([
      html.H5('Seleccione su nivel de colesterol mg/dl.')]),
    dcc.Dropdown(
        id='dropdown_col',
        options=options_col,
        value=''
        ),
    html.Div(id='output'),
    html.H5("Escriba su nivel de glucemia en ayunas mg/dl"),
    html.Div(["Fbs: ",
              dcc.Input
              (id='input-fbs', value='0', type='text')]),
    html.Br(),
    html.Div(id='output'),
    html.H5("Escriba su frecuencia cardiaca"),
    html.Div(["Frecuencia cardiaca: ",
              dcc.Input
              (id='input-car', value='0', type='text')]),
    html.Br(),
    html.Div(id='output'),
    html.Button('Enviar', id='button'),
        html.Br(),
        html.Div(id='output'),
        
])

sexo=""
edad=""
col =""
fbs=""
proba=0
anom_thalach=0
cp=""
@app.callback(dash.dependencies.Output('output', 'children'),
              [dash.dependencies.Input('button', 'n_clicks')],
              [dash.dependencies.State('dropdown', 'value')],
              [dash.dependencies.State('my-input', 'value')],
              [dash.dependencies.State('dropdown_col', 'value')],
              [dash.dependencies.State('input-fbs', 'value')],
              [dash.dependencies.State('input-car', 'value')],
             
              )

def update_output(n_clicks, dropdow_value,input_value,dropdown_col,input_fbs,input_car):
      global sexo
      sexo = dropdow_value
      if sexo=="Hombre":
          sexo=1
      else:
          sexo=0
      global edad
      edad= input_value
      if int(edad)<=44:
        edad="0-45"
      elif int(edad)<=54:
        edad="45-55"
      else:
        edad='55-100'
    
      global col
      col= dropdown_col
      global fbs
      fbs= input_fbs
      if int(fbs)>120:
         fbs=1
      else:
         fbs=0
      
      global anom_thalach
      anom_thalach=input_car
      if int(anom_thalach)>(220-int(input_value)):
         anom_thalach=1
      else:
         anom_thalach=0
      
      

      global proba
      infer = VariableElimination(model)
      P1 = infer.query(['num'], evidence={'age': edad,'sex':sexo, 'chol':col,'fbs':fbs,"anom_thalach":anom_thalach})
      proba= P1.values
      if proba[0]>0.3:
         recomendacion="Tienes una probabilidad alta, deberias ir al médico para revisar cómo esta tu corazón."
      else:
         recomendacion="Tienes una probabilidad baja, lo que significa que tu corazón esta sano."
      
      return html.Div([
        html.H3(f"Tu probabilidad (%) de tener una enfermedad cardiovascular es de : {proba[0]*100}"),
        html.H4(f"{recomendacion}"),
        html.H4(f"Aquí hay algunas recomendaciones que pueden ayudar a prevenir enfermedades cardiovasculares:"),
        html.Div([
        html.P("1. Mantener una dieta saludable: Una dieta equilibrada y saludable puede ayudar a reducir el riesgo de enfermedades cardiovasculares. Se recomienda una dieta rica en frutas, verduras, cereales integrales, proteínas magras y grasas saludables.")
    ]),
html.Div([
html.P("2. Mantenerse activo: El ejercicio regular es una excelente manera de mantener un corazón saludable. Se recomienda al menos 30 minutos de actividad física moderada la mayoría de los días de la semana")
    ]),
html.Div([
html.P("3. No fumar: Fumar es un factor de riesgo importante para las enfermedades cardiovasculares. Dejar de fumar puede reducir significativamente este riesgo")
    ])
       ])

        

if __name__ == '__main__':
    app.run_server(debug=True)
